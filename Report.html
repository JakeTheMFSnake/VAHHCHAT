<!DOCTYPE html>
<html>
<title>VahhChatt</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/index2.css">
<link rel="stylesheet" href="css/Report.css">
<style>
body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
.w3-navbar, label {font-family: "Montserrat", sans-serif}
.mySlides {display:none;}
</style>
<body>

<!-- Navbar -->
<div class="w3-top">
<ul class="w3-navbar w3-black w3-card-2 w3-left-align">
  <li class="w3-hide-medium w3-hide-large w3-opennav w3-right">
    <a class="w3-padding-large" href="javascript:void(0);" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
  </li>
  <li><a href="index.html" class="w3-hover-none w3-hover-text-grey w3-padding-large">HOME</a></li>
  <li class="w3-hide-small"><a href="Report.html" class="w3-hover-none w3-hover-text-grey w3-padding-large">Report</a></li>
  <li class="w3-hide-small"><a href="vahhchat.html" class="w3-hover-none w3-hover-text-grey w3-padding-large">VahhChatt</a></li>
</ul>
</div>
</body>

 <div id="Content">
   <h1>Introduction</h1>
<p>In the course Network Programming,EDA095, one of the course requirements is to complete a project with the base in network programming.</p>


<h1>Background</h1>
<p>The project was begun as part of the course in Network Programming EDA095. Its purpose is for the students to gather and use the knowledge involving network programming using different methods at our disposal. During this project we've encountered different techniques such as PHP, AJAX, MySQL and for website tools HTML, CSS and JavaScript.</p>


<h1>Requirements</h1>

<h2>Development Requirements</h2>

<ol>
	<li>The chat-system is divided into two parts: The Client, which will interact with the front-end which is shown through CSS and HTML. Functions are implemented in PHP and JavaScript. The
	Server, which will communicate with the client through PHP and AJAX. The server itself is based on PHP, AJAX and MySQL.</li>
	<li>Development shall be version controlled using GIT.</li>
</ol>

<h2>Quality Requirements</h2>

<h3>Performance:</h3>
<ol>
	<li>The system shall be sufficiently user-friendly and intuitive so that an LTH-student shall be able to use and explain the functionality within the system.</li>
	<li>The system shall allow people to choose nicknames so the messages can be separated.</li>
	<li>The system shall allow people to leave the chat room through a logout button (To change Nickname etc.).</li>
	<li>The system shall show author, avatar and time-stamp for each message.</li>
	<li>The system shall show how many users that are currently online.</li>
	<li>The system shall allow up to 20 people simultaneously using it.</li>
</ol>

<h2>Functional Requirements</h2>

<ol>
<li>Scenario: Open VAHH-chat <br/><br/>- The user opens the VAHH-chat with a URL \nPre-conditions: The URL is opened in an up to date web-reader with JavaScript enabled. \n Post-condition: The VAHH-chat is shown, with messages from the current session and showing users logged in to the chat.</li>
<br/><br/>
<li>Scenario: Login. <br/><br/> - User logs in by picking a nickname \n Pre-condition: The user is in VAHH-Chat tab. \n Post-condition: The user is logged in, all messages and users from previous sessions are shown.</li>
<br/><br/>
<li>Scenario: Send message. <br/><br/> - The user sends a message by writing the message in the text field and clicking on the "Submit"-button. \n Pre-condition: The user has chosen a nickname and has logged in to the system. \n Post-condition: The message that was chosen is sent and shown in the chat for the user and all others to see.</li>
<br/><br/>
<li>Scenario: Receive message. <br/><br/> - The user has the chat open with a chosen nickname/logged in and another user sends a message that is shown in the chat. \n Pre-condition: The user has the chat open with a chosen nickname/logged in. \n Post-condition: The message is shown in the chat.</li>
<br/><br/>
<li>Scenario: Logout. <br/><br/> - The user clicks on the "Logout"-button and thus logging him/her out of her system. \n Pre-condition: The user is logged in to the system. \n Post-condition: The user logs out and leaves the nickname earlier chosen free for anyone else to pick.</li>
</ol>

<h1>Model of the system</h1>

<p>The system has been implemented through a web-interface, thus we've been working with HTML, CSS, JavaScript, PHP, AJAX and jQuery.</p>

<p><b>HTML</b> is to lay down the structure of the website. Our documents are structured as HTML5 for convenience, as this will allow us to use the new, shorter doctype and skip the type attribute on the script tags. The two main documents is <i>vahhchat.html</i> which contains the chat itself. And <i>index.html</i> which is used to introduce the project and the system.</p>

<p><b>CSS</b> is to make the appearance more user friendly and visually better. We have four documents for this: <i>chat.css</i> which is for the chat itself, <i>page.css</i> which is for the page, <i>index2.css</i> which is for our index and <i>Report.css</i> which is for the report page.</p>

<p><b>SQL</b> is used since we're working with a database. We're using two tables: <i>webchat_users</i> and <i>last_lines</i>.</p>
<p>webchat_users holds the attributes ID, name and last_activity. The ID is to easier search and get users. The name field is defined as unique so that no other user can have the same nickname as another. last_activity holds a timestamp, which is updated every 15 seconds for every user. It is also defined as an index, so we can faster delete inactive users.</p>
<p>webchat_lines holds the attributes ID, author, text, ts. The ID is for the same purpose as webchat_users, to easier search and get lines. Author is to store the names of the users that sent the line/message. Text is the message itself and ts is a timestamp so we can delete old messages, just like inactive users.</p>
<p>The code to create the table is executed in out database, but can also be found in <i>tables.sql</i>.</p>

<p><b>PHP</b> is used operate all methods that is being used. We have <i>vahhchat.php</i> that holds a simple switch statement to define the actions which are supported by the script. Here are functions as login, logout and actions for requesting a list of chats and online users.</p>
<p>All outputs is in the form of JSON messages and errors are raised from exceptions. The switch statement will route the requests to static methods in the <i>Chat.class.php</i>.</p>
<p></p>
<p><i>ChatBase.class.php</i> has the purpose as a base which is used both by ChatLine and ChatUser. It's main purpose is to define the constructor, which takes an array with parameters and saved only the ones that are defined in the class.</p>
<p></p>
<p><i>ChatLine.class.php</i> extends ChatBase and is used for chat entries.</p>
<p></p>
<p><i>ChatBase.class.php</i> extends ChatBase as well and has two methods/functions that saves, which  returns the MySQLi object, contained in the DB class, you can check whether the save was successful by checking the affected_rows property. And the method/function update, which updates the last_activity timestamp to the current time. This shows that this person keeps a chat window open and is displayed as online in the users section.</p>
<p></p>
<p><i>DB.class.php</i> is our database manager which basically handles our SQL-communication between the database and web-browser.</p>
<p></p>
<p><i>JavaScript</i> is used so the chat will listen for events on the login and submit forms (as well as the logout button). There are also scheduled AJAX requests back to the server for checking for new chat-messages and users.</p>
<p>In <i>script.js</i> we have all the functionality that makes the chat "live". The script will have listeners that will wait for certain events to occur (such as on the login and submit forms).</p>

<h1>Usability</h1>
<p>The project group decided to set the knowledge level to be such that a university student can easily use and master the chat-room without encountering any difficulties. Information about the system will always be shown so that a user can see how many people are using the system at any given time and other information that is listed in our quality requirements. The group decided that a simple login using just a nickname was all the information that an user would need to use the system. All of the chat code is organized in a single object called chat. It consists of a number of useful methods for the chat-system to work. The script has been implemented so it's self-executing for security purpose, to protect the code from outer sources. E.g. declining access to the tzPost method, that otherwise could've resulted in the possibility to post as many messages as you'd wish, causing the system to crash.</p>

<h1>Evaluation</h1>
<p>The project succeeded in fulfilling all of the requirements. If we had more time we would have added some more functionality added more functionality to the chat-system. We used an iterative process where we had a basic idea with a few requirements to carefully expanding it with more functionality and adding more requirements. In the project we had assigned roles to each member and had set up weekly meetings where we could brief each other on our progress and what difficulties we've encountered since our last meeting. We took this time to help each other by providing assistance or to help in any other way.</p>

<p>It was a nice and fun project which makes all the Java courses go full circle and rounds off the basic level of Java programming. It was the last piece in the puzzle. The one thing in the project that could've been improved upon is to maybe set up a bi-weekly appointment with the supervisor instead of having them during the lab.</p>

<p>What we've learned concerning coding in JavaScript in PHP is that instead of using AJAX for all our requests every third second, we could've used websockets instead. Thus eliminating the need to send anything from the client, and instead just letting the script at the backend listen after new events.</p>

<h1>Source code</h1>
<p>See the attached files.</p>


<h1>User's Manual</h1>
<p><a href="http://vahhchat.jakobhakansson.se/vahhchat.html">Login to VAHH-chat website</a> and find your way to the link to the chat-room.</p>
<p>When you've been directed to the chat-system you are required to put in a nickname and click the login button.</p>
<p>Now you should be ready to use VAHH-chat. The functions included in the system is to send and receive messages which you are now ready to do.</p>
</html>
